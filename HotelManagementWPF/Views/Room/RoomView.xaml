<UserControl x:Class="HotelManagementWPF.Views.Room.RoomView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:HotelManagementWPF.ViewModels"
             Background="White">
    <UserControl.Resources>
        <Style x:Key="SimplePill" TargetType="Button">
            <Setter Property="Background" Value="White" />
            <Setter Property="BorderBrush" Value="#E0E0E0" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="12,6" />
            <Setter Property="Margin" Value="0,0,8,0" />
            <Setter Property="Foreground" Value="#2C3E50" />
        </Style>
        <Style x:Key="AddButton" TargetType="Button">
            <Setter Property="Background" Value="#2C3E50" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="Padding" Value="14,6" />
            <Setter Property="Margin" Value="8,0,0,0" />
        </Style>
        <Style x:Key="PaginationButton" TargetType="Button">
            <Setter Property="Padding" Value="8,4" />
            <Setter Property="Margin" Value="4,0" />
        </Style>
    </UserControl.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Grid.Row="0" VerticalAlignment="Center">
            <Button Style="{StaticResource SimplePill}" Command="{Binding FilterCommand}" CommandParameter="All">
                <TextBlock Text="{Binding TotalRooms, StringFormat=All Rooms ({0})}" />
            </Button>
            <Button Style="{StaticResource SimplePill}" Command="{Binding FilterCommand}" CommandParameter="Available">
                <TextBlock Text="{Binding AvailableRooms, StringFormat=Available ({0})}" />
            </Button>
            <Button Style="{StaticResource SimplePill}" Command="{Binding FilterCommand}" CommandParameter="Booked">
                <TextBlock Text="{Binding BookedRooms, StringFormat=Booked ({0})}" />
            </Button>
            <Button Style="{StaticResource AddButton}" Command="{Binding AddRoomCommand}" HorizontalAlignment="Right">
                <TextBlock Text="Add Room" />
            </Button>
        </StackPanel>

        <DataGrid Grid.Row="1" ItemsSource="{Binding PaginatedRooms}" AutoGenerateColumns="False" IsReadOnly="True" Margin="0,12,0,12">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Room Number" Binding="{Binding RoomNumber}" Width="*" />
                <DataGridTextColumn Header="Bed Type" Binding="{Binding BedType}" Width="*" />
                <DataGridTextColumn Header="Price" Binding="{Binding Price, StringFormat=C}" Width="*" />
                <DataGridTemplateColumn Header="Status" Width="Auto">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Status}" Padding="6,2" Background="LightGray" Foreground="White" HorizontalAlignment="Center" />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center">
            <Button Style="{StaticResource PaginationButton}" Command="{Binding PreviousPageCommand}">Previous</Button>
            <ItemsControl ItemsSource="{Binding PageNumbers}" Margin="8,0">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button Style="{StaticResource PaginationButton}" Command="{Binding DataContext.GoToPageCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}">{Binding}</Button>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            <Button Style="{StaticResource PaginationButton}" Command="{Binding NextPageCommand}">Next</Button>
        </StackPanel>
    </Grid>
</UserControl>
